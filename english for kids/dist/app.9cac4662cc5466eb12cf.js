(()=>{"use strict";var t={772:(t,e,i)=>{i.r(e)},753:(t,e,i)=>{i.r(e)},336:(t,e,i)=>{i.r(e)},957:(t,e,i)=>{i.r(e)},420:(t,e,i)=>{i.r(e)},783:(t,e,i)=>{i.r(e)},337:(t,e,i)=>{i.r(e)},410:(t,e,i)=>{i.r(e)},373:(t,e,i)=>{i.r(e)},752:function(t,e,i){var a=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(s,n){function o(t){try{d(a.next(t))}catch(t){n(t)}}function r(t){try{d(a.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,r)}d((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.App=void 0;const s=i(859),n=i(977),o=i(485),r=i(229),d=i(59),c=i(69),l=i(861),h=i(359),u=i(789),p=i(598),m=i(917);e.App=class{constructor(t){this.rootElement=t,this.overlay=new u.Overlay,this.newRout=new s.NewRout,this.dataBaseDarya=new d.DatabaseDarya,this.game=new r.Game(this.dataBaseDarya),this.gridBtn=new o.GridBtn(this.game,this.dataBaseDarya,this.overlay),this.adminPage=new p.AdminPage(this.dataBaseDarya,this.overlay),this.loginedAdmin=new m.LoginedAdmin,this.registration=new h.Registration(this.overlay,this.adminPage,this.newRout,this.loginedAdmin),this.header=new n.Header(this.gridBtn,this.newRout,this.registration),this.statistics=new l.Statistics(this.dataBaseDarya)}start(){return a(this,void 0,void 0,(function*(){this.newRout.add("statistics",(()=>{this.statistics.show(),this.gridBtn.hide(),this.statistics.statisticShow(),this.adminPage.hide()})),this.newRout.add("",(()=>{this.statistics.hide(),this.gridBtn.show(),this.header.show(),this.adminPage.hide()})),this.newRout.add("categories",(()=>{this.loginedAdmin.loginedAdmin?(this.statistics.hide(),this.gridBtn.hide(),this.header.hide(),this.adminPage.drawAllCategories(),this.adminPage.show()):this.newRout.navigate("")})),yield this.dataBaseDarya.load();const t=fetch("https://mighty-cliffs-95999.herokuapp.com/api/cards"),e=fetch("https://mighty-cliffs-95999.herokuapp.com/api/categories"),i=yield(yield t).json(),a=yield(yield e).json();document.getElementsByClassName("loader")[0].classList.add("hidden");for(let t=0;t<a.length;t++){const e=i.filter((e=>e.categoryId===a[t].id));a[t].cardsContent=e}this.header.drawHeader(a),this.gridBtn.categories=a,this.adminPage.categories=a,this.adminPage.drawAllCategories(),this.rootElement.appendChild(this.registration.element),this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.gridBtn.element),this.rootElement.appendChild(this.statistics.element),this.rootElement.appendChild(this.adminPage.element),this.rootElement.appendChild(this.overlay.element);const s=document.createElement("footer");s.innerHTML='<a href="https://rs.school/js/" target="_blank">The Rolling Scopes|</a>\n    <img src =\'https://rs.school/images/rs_school_js.svg\'>\n    <p>|2021|</p>\n    <a href="https://github.com/IamDarya" target="_blank">My github</a>',this.rootElement.appendChild(s),this.gridBtn.drawAllCategories();for(let t=0;t<a.length;t++)for(let e=0;e<a[t].cardsContent.length;e++)if(void 0===(yield this.dataBaseDarya.getWord(a[t].category+a[t].cardsContent[e].word+a[t].cardsContent[e].translation))){const i=new c.WordStatistic(a[t].category,a[t].cardsContent[e].word,a[t].cardsContent[e].translation,0,a[t].category+a[t].cardsContent[e].word+a[t].cardsContent[e].translation,0,0,0);yield this.dataBaseDarya.transaction(i)}}))}}},660:function(t,e,i){var a=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(s,n){function o(t){try{d(a.next(t))}catch(t){n(t)}}function r(t){try{d(a.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,r)}d((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.AdminPageCardView=void 0,i(783),i(753),i(772);const s=i(583);class n extends s.BaseComponent{constructor(t,e,i,a,s,n){super("div",["one-theme-block","front"]),this.callBacks=[],this.callBacksForNewWord=[],this.categories=[],this.categoryAmountOfCards=t,this.cardState=e,this.cardObj=i,this.id=n,this.category=a,this.dataBaseDarya=s,this.audio=new Audio,"Themes"===this.cardState&&this.drawThemesAdmin()}drawThemesAdmin(){return a(this,void 0,void 0,(function*(){this.element.innerHTML="",this.element.classList.add("one-theme-block-admin");const t=document.createElement("button");t.classList.add("close-card"),t.innerText="x";const e=document.createElement("span");e.innerText=`${this.category}`,this.element.appendChild(e),this.element.appendChild(t),this.element.setAttribute("data-topic",`${this.category}`);const i=document.createElement("p");i.innerText=`WORDS: ${this.categoryAmountOfCards}`,this.element.appendChild(i);const a=document.createElement("button");a.innerText="Update",a.classList.add("update-btn");const s=document.createElement("button");s.innerText="Add word",s.classList.add("add-word-btn"),this.element.appendChild(a),this.element.appendChild(s),s.addEventListener("click",(()=>{this.callBacksForNewWord.forEach((t=>t()))})),a.addEventListener("click",(()=>{this.drawUpdateTheme()})),t.addEventListener("click",(()=>{this.deleteCategory()}))}))}drawUpdateTheme(){return a(this,void 0,void 0,(function*(){this.element.innerHTML="",this.element.classList.add("one-theme-block-admin");const t=document.createElement("button");t.classList.add("close-card"),t.innerText="x";const e=document.createElement("label");e.innerHTML="Category Name:",this.element.appendChild(e);const i=document.createElement("input");i.placeholder=`${this.category}`,this.element.appendChild(i),this.element.appendChild(t);const s=document.createElement("button");s.innerText="Update",s.classList.add("update-categ-btn");const n=document.createElement("button");n.innerText="Cancel",n.classList.add("cancel-upd-categ-btn"),this.element.appendChild(s),this.element.appendChild(n),t.addEventListener("click",(()=>{this.deleteCategory()})),s.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){this.updateCategoryName(i)})))),n.addEventListener("click",(()=>{this.drawThemesAdmin()}))}))}drawUpdateWord(){return a(this,void 0,void 0,(function*(){this.element.innerHTML="",this.element.classList.add("one-theme-block-admin");const t=document.createElement("label");t.classList.add("label-change-word"),t.innerHTML=`Category Name: ${this.category}`,this.element.appendChild(t);const e=document.createElement("label");e.innerHTML="Word:",e.classList.add("label-change-word"),this.element.appendChild(e);const i=document.createElement("input");i.placeholder=`${this.cardObj.word}`,this.element.appendChild(i);const s=document.createElement("label");s.innerHTML="Translation:",s.classList.add("label-change-word"),this.element.appendChild(s);const n=document.createElement("input");n.placeholder=`${this.cardObj.translation}`,this.element.appendChild(n);const o=document.createElement("div");o.id="canvas";const r=document.createElement("input");r.type="file";const d=document.createElement("label");d.innerText="Image:",d.classList.add("label-For-AudImg"),r.classList.add("fileInputImg"),r.multiple=!1,r.accept="image/*",this.element.appendChild(o),this.element.appendChild(d),this.element.appendChild(r),r.addEventListener("change",(function(){return a(this,void 0,void 0,(function*(){const t=r.files[0],e=new FileReader;e.onloadend=function(){o.style.backgroundImage=`url(${e.result})`},t&&e.readAsDataURL(t)}))}),!0);const c=document.createElement("input");c.type="file";const l=document.createElement("label");l.innerText="Audio:",l.classList.add("label-For-AudImg"),c.classList.add("fileInputAud"),c.multiple=!1,c.accept="audio/*",this.element.appendChild(l),this.element.appendChild(c),c.addEventListener("change",(function(){return a(this,void 0,void 0,(function*(){const t=c.files[0],e=new FileReader;t&&e.readAsDataURL(t)}))}),!0);const h=document.createElement("button");h.innerText="Update",h.classList.add("update-categ-btn");const u=document.createElement("button");u.innerText="Cancel",u.classList.add("cancel-upd-categ-btn"),this.element.appendChild(h),this.element.appendChild(u),h.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){this.updateCategoryName(i)})))),u.addEventListener("click",(()=>{this.drawOneTheme()}))}))}drawOneTheme(){this.element.innerHTML="";const t=document.createElement("button");this.element.appendChild(t),t.classList.add("close-card"),t.innerText="x",this.audio=document.createElement("audio");const e=document.createElement("div");e.classList.add("card-content"),e.innerHTML=`<p>Word: ${this.cardObj.word}</p>\n    <p>Translation: ${this.cardObj.translation}</p>\n    <p>Sound: ${this.cardObj.audioSrc}</p>\n    <p>Image:</p>\n    `,this.element.appendChild(e),this.audio.setAttribute("src",`${this.cardObj.audioSrc}`),this.element.classList.add("one-theme-block-admin","one-theme"),this.element.removeAttribute("data-topic"),this.element.setAttribute("data-topic",`${this.category}`);const i=document.createElement("div");i.classList.add("picture"),this.element.appendChild(i),i.setAttribute("style",`background-image:url('${this.cardObj.image}');`),this.element.appendChild(this.audio);const a=document.createElement("button");a.innerText="Change",a.classList.add("change-btn"),this.element.appendChild(a),a.addEventListener("click",(()=>{this.drawUpdateWord()})),t.addEventListener("click",(()=>{this.deleteWord()}))}updateCategoryName(t){return a(this,void 0,void 0,(function*(){const e=yield(yield fetch(`https://mighty-cliffs-95999.herokuapp.com/api/categories/${this.id}`)).json();e.category=t.value,yield fetch("https://mighty-cliffs-95999.herokuapp.com/api/categories/",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),this.category=e.category,this.drawThemesAdmin()}))}deleteCategory(){return a(this,void 0,void 0,(function*(){yield fetch(`https://mighty-cliffs-95999.herokuapp.com/api/categories/${this.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),this.callBacks.forEach((t=>t()))}))}deleteWord(){return a(this,void 0,void 0,(function*(){yield fetch(`https://mighty-cliffs-95999.herokuapp.com/api/cards/word/${this.cardObj.word}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),this.callBacksForNewWord.forEach((t=>t()))}))}onClickDelete(t){this.callBacks.push(t)}onClickAddWord(t){this.callBacksForNewWord.push(t)}}e.AdminPageCardView=n},598:function(t,e,i){var a=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(s,n){function o(t){try{d(a.next(t))}catch(t){n(t)}}function r(t){try{d(a.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,r)}d((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.AdminPage=e.StateToDraw=void 0,i(753);const s=i(583),n=i(660);var o;!function(t){t.OneTheme="OneTheme",t.OneWord="OneWord",t.Themes="Themes"}(o=e.StateToDraw||(e.StateToDraw={}));class r extends s.BaseComponent{constructor(t,e){super("div",["admin-page-wrapper"]),this.drawHeaderAdmin(),this.overlay=e,this.themesBlock=document.createElement("div"),this.overlayContent=document.createElement("div"),this.categories=[],this.activeCategoryObj=void 0,this.activeCategory=void 0,this.arrayOfCardDivs=[],this.dataBaseDarya=t,this.themesBlock.classList.add("themes-block"),this.element.appendChild(this.themesBlock),this.overlayContent.classList.add("content"),this.element.appendChild(this.overlayContent)}drawAllCategories(){return a(this,void 0,void 0,(function*(){this.themesBlock.innerHTML="",this.activeCategory=void 0,this.activeCategoryObj=void 0;const t=yield(yield fetch("https://mighty-cliffs-95999.herokuapp.com/api/cards")).json();this.categories=yield(yield fetch("https://mighty-cliffs-95999.herokuapp.com/api/categories")).json();for(let e=0;e<this.categories.length;e++){const i=t.filter((t=>t.categoryId===this.categories[e].id));this.categories[e].cardsContent=i}for(let t=0;t<this.categories.length;t++){const e=new n.AdminPageCardView(this.categories[t].cardsContent.length,o.Themes,this.categories[t].cardsContent[3],this.categories[t].category,this.dataBaseDarya,this.categories[t].id);this.themesBlock.appendChild(e.element),e.onClickDelete((()=>{this.drawAllCategories()})),e.onClickAddWord((()=>{this.drawCategory(this.categories[t].category)}))}this.createNewCategoryCard()}))}drawCategory(t){var e,i;return a(this,void 0,void 0,(function*(){const a=yield(yield fetch("https://mighty-cliffs-95999.herokuapp.com/api/cards")).json();this.categories=yield(yield fetch("https://mighty-cliffs-95999.herokuapp.com/api/categories")).json();for(let t=0;t<this.categories.length;t++){const e=a.filter((e=>e.categoryId===this.categories[t].id));this.categories[t].cardsContent=e}if(this.themesBlock.innerHTML="",this.arrayOfCardDivs=[],this.activeCategoryObj=this.categories.find((e=>e.category===t)),this.activeCategory=null===(e=this.activeCategoryObj)||void 0===e?void 0:e.category,void 0!==this.activeCategoryObj)for(let t=0;t<(null===(i=this.activeCategoryObj)||void 0===i?void 0:i.cardsContent.length);t++){const e=new n.AdminPageCardView(this.categories[t].cardsContent.length,o.OneTheme,this.activeCategoryObj.cardsContent[t],this.activeCategoryObj.category,this.dataBaseDarya,this.activeCategoryObj.id);this.arrayOfCardDivs.push(e),this.themesBlock.appendChild(e.element),e.drawOneTheme(),e.onClickAddWord((()=>{void 0!==this.activeCategory&&this.drawCategory(this.activeCategory)}))}this.createNewWordCard()}))}createNewCategoryCard(){const t=document.createElement("div");t.classList.add("one-theme-block","create-new-category-card","one-theme-block-admin");const e=document.createElement("span");t.appendChild(e);const i=document.createElement("p");i.innerText="Create new Category",t.appendChild(i);const a=document.createElement("button");a.innerText="+",a.classList.add("add-category-btn"),t.appendChild(a),this.themesBlock.appendChild(t),a.addEventListener("click",(()=>{this.createCardWithInfoForNewCategoryAndAddit()}))}createCardWithInfoForNewCategoryAndAddit(){const t=document.createElement("div");t.classList.add("one-theme-block-admin","create-new-card-category","one-theme-block");const e=document.createElement("label");e.innerHTML="Category Name:",t.appendChild(e);const i=document.createElement("input");t.appendChild(i);const s=document.createElement("button");s.innerText="Create",s.classList.add("update-categ-btn");const n=document.createElement("button");n.innerText="Cancel",n.classList.add("cancel-upd-categ-btn"),t.appendChild(s),t.appendChild(n),this.themesBlock.appendChild(t),s.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){this.addNewCategory(i.value)})))),n.addEventListener("click",(()=>{this.drawAllCategories()}))}addNewCategory(t){return a(this,void 0,void 0,(function*(){const e={category:t};yield fetch("https://mighty-cliffs-95999.herokuapp.com/api/categories/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),this.drawAllCategories()}))}createNewWordCard(){const t=document.createElement("div");t.classList.add("one-theme-block","create-new-category-card","one-theme-block-admin");const e=document.createElement("span");t.appendChild(e);const i=document.createElement("p");i.innerText="Add new Word",t.appendChild(i);const a=document.createElement("button");a.innerText="+",a.classList.add("add-category-btn"),t.appendChild(a),this.themesBlock.appendChild(t),a.addEventListener("click",(()=>{}))}drawHeaderAdmin(){const t=document.createElement("header");t.innerHTML='\n    <ul class="header">\n    <li class="text"><a href="#">Categories</a></li>\n    <li class="text"><a href="#">Words</a></li>\n    <li class="text"><a href="#"><button class="logout-btn">Logout</button></a></li>\n  </ul>\n    ',this.element.appendChild(t)}}e.AdminPage=r},583:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseComponent=void 0,e.BaseComponent=class{constructor(t="div",e=[]){this.element=document.createElement(t),this.element.classList.add(...e)}show(){this.element.classList.remove("hidden")}hide(){this.element.classList.add("hidden")}}},311:function(t,e,i){var a=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(s,n){function o(t){try{d(a.next(t))}catch(t){n(t)}}function r(t){try{d(a.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,r)}d((a=a.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CardView=void 0,i(783);const n=s(i(615)),o=i(583);class r extends o.BaseComponent{constructor(t,e,i,a){super("div",["one-theme-block","front"]),this.callBacks=[],this.cardState=t,this.cardObj=e,this.category=i,this.dataBaseDarya=a,this.audio=new Audio,"Train"===this.cardState&&this.drawTrain(),"Play"===this.cardState&&this.drawPlay(),"Themes"===this.cardState&&this.drawThemes()}drawPlay(){this.element.innerHTML="",this.audio=document.createElement("audio"),this.audio.setAttribute("src",`${this.cardObj.audioSrc}`),this.element.classList.add("one-theme-block","front"),this.element.removeAttribute("data-topic"),this.element.setAttribute("data-topic",`${this.category}`),this.element.setAttribute("style",`background-image:url('${this.cardObj.image}');`),this.element.appendChild(this.audio)}drawTrain(){this.element.innerHTML="";const t=document.createElement("img"),e=document.createElement("div");this.audio=document.createElement("audio"),e.classList.add("back","hidden");const i=document.createElement("span");e.appendChild(i),i.innerText=`${this.cardObj.translation}`,this.audio.setAttribute("src",`${this.cardObj.audioSrc}`),e.setAttribute("style",`background-image:url('${this.cardObj.image}');`),e.removeAttribute("data-topic"),e.setAttribute("data-topic",`${this.category}`),t.setAttribute("src",n.default),t.removeAttribute("data-topic"),t.setAttribute("data-topic",`${this.category}`),t.classList.add("flip-pic"),this.element.classList.add("one-theme-block","front"),this.element.removeAttribute("data-topic"),this.element.setAttribute("data-topic",`${this.category}`),this.element.setAttribute("style",`background-image:url('${this.cardObj.image}');`);const s=document.createElement("span");s.innerText=`${this.cardObj.word}`,this.element.appendChild(s),this.element.appendChild(t),this.element.appendChild(e),this.element.appendChild(this.audio),t.addEventListener("click",(t=>a(this,void 0,void 0,(function*(){const i=t.target,a=this.category+this.cardObj.word+this.cardObj.translation,s=yield this.dataBaseDarya.getWord(a);void 0!==s.click&&(s.click++,this.dataBaseDarya.update(s),e.classList.remove("hidden"),function(t){const e=t.parentElement;null!==e&&(e.classList.add("flipp"),e.addEventListener("mouseleave",(()=>{null!==e&&e.classList.remove("flipp"),setTimeout((()=>e.getElementsByClassName("back")[0].classList.add("hidden")),500)})))}(i))})))),this.element.addEventListener("click",(t=>a(this,void 0,void 0,(function*(){const e=this.category+this.cardObj.word+this.cardObj.translation,i=yield this.dataBaseDarya.getWord(e);void 0!==i.click&&(i.click++,this.dataBaseDarya.update(i)),t.target.classList.contains("flip-pic")||this.audio.play()}))))}drawThemes(){this.element.innerHTML="",this.element.classList.add("one-theme-block","front");const t=document.createElement("span");t.innerText=`${this.category}`,this.element.appendChild(t),this.element.setAttribute("data-topic",`${this.category}`),this.element.setAttribute("style",`background-image:url('${this.cardObj.image}');`),this.element.addEventListener("click",(()=>{this.callBacks.forEach((t=>t()))}))}onClickTheme(t){this.callBacks.push(t)}}e.CardView=r},59:function(t,e){var i=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(s,n){function o(t){try{d(a.next(t))}catch(t){n(t)}}function r(t){try{d(a.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,r)}d((a=a.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.DatabaseDarya=void 0,e.DatabaseDarya=class{load(){return i(this,void 0,void 0,(function*(){return new Promise((t=>{this.request=window.indexedDB.open("IamDarya",2),this.request.onsuccess=e=>{const i=e.target;this.db=i.result,t()},this.request.onupgradeneeded=e=>{const i=e.target;this.db=i.result,this.db.createObjectStore("words",{keyPath:"id"}),t()}}))}))}transaction(t){return i(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{var a;const s=null===(a=this.db)||void 0===a?void 0:a.transaction("words","readwrite"),n=null==s?void 0:s.objectStore("words"),o=null==n?void 0:n.add(t);void 0!==o&&(o.onsuccess=function(){e()},o.onerror=function(){i()})}))}))}getWord(t){return i(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{var a;const s=null===(a=this.db)||void 0===a?void 0:a.transaction("words","readwrite"),n=null==s?void 0:s.objectStore("words"),o=null==n?void 0:n.get(t);void 0!==o&&(o.onsuccess=function(){e(o.result)},o.onerror=function(){i(o.error)})}))}))}update(t){return i(this,void 0,void 0,(function*(){return new Promise(((e,i)=>{var a;const s=null===(a=this.db)||void 0===a?void 0:a.transaction("words","readwrite"),n=null==s?void 0:s.objectStore("words"),o=null==n?void 0:n.put(t);void 0!==o&&(o.onsuccess=function(){e()},o.onerror=function(){i()})}))}))}getAllWords(){return i(this,void 0,void 0,(function*(){return new Promise(((t,e)=>{var i;const a=null===(i=this.db)||void 0===i?void 0:i.transaction("words","readwrite"),s=null==a?void 0:a.objectStore("words"),n=null==s?void 0:s.getAll();void 0!==n&&(n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)})}))}))}}},69:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WordStatistic=void 0,e.WordStatistic=class{constructor(t,e,i,a,s,n,o,r){this.category=t,this.word=e,this.translation=i,this.click=a,this.id=t+e+i,this.correct=n,this.wrong=o,this.persOfErrors=r}}},229:function(t,e,i){var a=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(s,n){function o(t){try{d(a.next(t))}catch(t){n(t)}}function r(t){try{d(a.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,r)}d((a=a.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Game=e.playAudio=void 0;const n=i(583);i(336);const o=s(i(849)),r=s(i(746));function d(t){setTimeout((()=>t.play()),1e3)}e.playAudio=d;class c extends n.BaseComponent{constructor(t){super(),this.callBacks=[],this.callBacksForEndGame=[],this.allAudios=[],this.currentAudio=new Audio,this.errorAudio=new Audio(o.default),this.correctAudio=new Audio(r.default),this.amountOfErrors=0,this.dataBaseDarya=t}startGame(t,e){return a(this,void 0,void 0,(function*(){this.callBacks=[],this.callBacksForEndGame=[],this.amountOfErrors=0;let i=[...t.cardsContent],s=new Audio(`${i[Math.floor(Math.random()*i.length)].audioSrc}`);d(s);let n=i.filter((t=>t.audioSrc===s.getAttribute("src"))),o=t.category+n[0].word+n[0].translation,r=yield this.dataBaseDarya.getWord(o);this.currentAudio=s,e.forEach((c=>{c.element.addEventListener("click",(()=>a(this,void 0,void 0,(function*(){var a;(null===(a=c.element.firstElementChild)||void 0===a?void 0:a.getAttribute("src"))===s.getAttribute("src")?null!==s.getAttribute("src")&&(i=i.filter((t=>t.audioSrc!==s.getAttribute("src"))),c.element.classList.add("inactive-card"),e=e.filter((t=>t!==c)),this.callBacks.forEach((t=>t("Correct"))),d(this.correctAudio),void 0!==i[Math.floor(Math.random()*i.length)]&&(s=new Audio(`${i[Math.floor(Math.random()*i.length)].audioSrc}`),this.currentAudio=s,d(s),n=i.filter((t=>t.audioSrc===s.getAttribute("src"))),o=t.category+n[0].word+n[0].translation,r=yield this.dataBaseDarya.getWord(o),void 0!==r.correct&&(r.correct++,this.dataBaseDarya.update(r),r.persOfErrors=r.correct/(r.correct+r.wrong)*100,this.dataBaseDarya.update(r)))):e.indexOf(c)>=0&&(this.callBacks.forEach((t=>t("Fail"))),d(this.errorAudio),this.amountOfErrors++,void 0!==r.wrong&&(r.wrong++,this.dataBaseDarya.update(r),r.persOfErrors=r.correct/(r.correct+r.wrong)*100,this.dataBaseDarya.update(r))),0===e.length&&this.endGame()}))))}))}))}endGame(){this.callBacksForEndGame.forEach((t=>t()))}onUserAnswer(t){this.callBacks.push(t)}onEndGame(t){this.callBacksForEndGame.push(t)}}e.Game=c},485:function(t,e,i){var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.GridBtn=e.PlayMode=void 0,i(783);const s=i(583),n=i(311),o=i(229),r=a(i(937)),d=a(i(218)),c=a(i(747)),l=a(i(707)),h=a(i(432)),u=a(i(639)),p=a(i(181));var m;!function(t){t.Train="Train",t.Play="Play"}(m=e.PlayMode||(e.PlayMode={}));class g extends s.BaseComponent{constructor(t,e,i){super("div",["grid-of-img-and-switch-btn-wrapper"]),this.overlay=i,this.train=m.Train,this.themesBlock=document.createElement("div"),this.divWithFailCorrectSigns=document.createElement("div"),this.divWithBtnToStartPlay=document.createElement("div"),this.btnToStartPlay=document.createElement("button"),this.btnToRepeatAudio=document.createElement("button"),this.overlayContent=document.createElement("div"),this.categories=[],this.activeCategoryObj=void 0,this.activeCategory=void 0,this.game=t,this.arrayOfCardDivs=[],this.dataBaseDarya=e;const a=document.createElement("input");a.classList.add("toggle"),a.type="checkbox",this.element.appendChild(a),this.divWithFailCorrectSigns.classList.add("div-with-fail-correct-signs"),this.element.appendChild(this.divWithFailCorrectSigns),a.addEventListener("click",(()=>{this.train===m.Train?(this.train=m.Play,void 0!==this.activeCategory&&this.drawCategory(this.activeCategory)):(this.train=m.Train,void 0!==this.activeCategory&&this.drawCategory(this.activeCategory),this.btnToRepeatAudio.classList.add("hidden"),this.btnToStartPlay.classList.remove("hidden"),this.divWithFailCorrectSigns.innerHTML=""),this.themesBlock.classList.toggle("play-mode")})),this.themesBlock.classList.add("themes-block"),this.element.appendChild(this.themesBlock),this.divWithBtnToStartPlay.classList.add("div-with-btn-to-start-play"),this.element.appendChild(this.divWithBtnToStartPlay),this.btnToStartPlay.innerText="Start Game",this.btnToStartPlay.classList.add("btn-to-start-play"),this.divWithBtnToStartPlay.setAttribute("style","display: none;"),this.divWithBtnToStartPlay.appendChild(this.btnToStartPlay),this.btnToStartPlay.addEventListener("click",(()=>{void 0!==this.activeCategoryObj&&(this.btnToRepeatAudio=document.createElement("button"),this.btnToStartPlay.classList.add("hidden"),this.btnToRepeatAudio.classList.remove("hidden"),this.btnToRepeatAudio.classList.add("btn-to-repeat-audio","btn-to-start-play"),this.btnToRepeatAudio.setAttribute("style",`background-image: url('${c.default}');`),this.divWithBtnToStartPlay.appendChild(this.btnToRepeatAudio),this.btnToRepeatAudio.addEventListener("click",(()=>{o.playAudio(this.game.currentAudio)})),this.game.startGame(this.activeCategoryObj,this.arrayOfCardDivs),this.game.onUserAnswer((t=>{this.addCorrectFailSign(t)})),this.game.onEndGame((()=>{this.btnToRepeatAudio.classList.add("hidden"),this.btnToStartPlay.classList.remove("hidden"),this.divWithFailCorrectSigns.innerHTML="",this.ShowPopUpEndGame()})))})),this.overlayContent.classList.add("content"),this.element.appendChild(this.overlayContent)}ShowPopUpEndGame(){this.overlayContent.innerText="";const t=new Audio(u.default),e=new Audio(p.default);this.game.amountOfErrors>0?(this.overlayContent.setAttribute("style",`background-image:url('${h.default}');`),this.overlayContent.innerText=`You made ${this.game.amountOfErrors} mistake(s). Train more.`,o.playAudio(e)):(this.overlayContent.setAttribute("style",`background-image:url('${l.default}');`),o.playAudio(t)),this.overlay.overlayON(),this.overlayContent.classList.add("is-on"),setTimeout((()=>{this.overlayContent.classList.remove("is-on"),this.overlay.overlayOFF()}),5e3),this.drawAllCategories()}drawAllCategories(){this.themesBlock.innerHTML="",this.divWithFailCorrectSigns.innerHTML="",this.activeCategory=void 0,this.activeCategoryObj=void 0;for(let t=0;t<this.categories.length;t++){const e=new n.CardView("Themes",this.categories[t].cardsContent[3],this.categories[t].category,this.dataBaseDarya);this.themesBlock.appendChild(e.element),e.onClickTheme((()=>{this.drawCategory(this.categories[t].category)}))}this.divWithBtnToStartPlay.setAttribute("style","display: none;")}drawCategory(t){var e,i;if(this.themesBlock.innerHTML="",this.arrayOfCardDivs=[],this.activeCategoryObj=this.categories.find((e=>e.category===t)),this.activeCategory=null===(e=this.activeCategoryObj)||void 0===e?void 0:e.category,void 0!==this.activeCategoryObj)for(let t=0;t<(null===(i=this.activeCategoryObj)||void 0===i?void 0:i.cardsContent.length);t++){const e=new n.CardView(this.train,this.activeCategoryObj.cardsContent[t],this.activeCategoryObj.category,this.dataBaseDarya);this.arrayOfCardDivs.push(e),this.themesBlock.appendChild(e.element)}"Play"===this.train?this.divWithBtnToStartPlay.removeAttribute("style"):this.divWithBtnToStartPlay.setAttribute("style","display: none;")}addCorrectFailSign(t){const e=document.createElement("div");"Correct"===t&&(e.classList.add("picFailCorrect","correct"),e.setAttribute("style",`background-image:url('${r.default}');`),this.divWithFailCorrectSigns.appendChild(e)),"Fail"===t&&(e.classList.add("picFailCorrect","fail"),e.setAttribute("style",`background-image:url('${d.default}');`),this.divWithFailCorrectSigns.appendChild(e))}}e.GridBtn=g},789:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Overlay=void 0;const a=i(583);i(957);class s extends a.BaseComponent{constructor(){super("div",["overlay","hidden"])}overlayON(){this.element.classList.add("is-on"),this.element.classList.remove("hidden")}overlayOFF(){this.element.classList.remove("is-on"),this.element.classList.add("hidden")}}e.Overlay=s},977:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0,i(783),i(420);const a=i(583);function s(t){void 0!==document.getElementsByClassName("active")[0]&&document.getElementsByClassName("active")[0].classList.remove("active"),t.target.classList.add("active")}class n extends a.BaseComponent{constructor(t,e,i){super("nav",["nav-burger"]),this.categories=[],this.newRout=e,this.gridBtn=t,this.loginBtnLi=document.createElement("li"),this.loginBtn=document.createElement("button"),this.registration=i}drawHeader(t){const e=document.createElement("div");e.id="menuToggle";const i=document.createElement("input");i.setAttribute("type","checkbox"),e.appendChild(i);for(let t=0;t<3;t++){const t=document.createElement("span");e.appendChild(t)}const a=document.createElement("ul");a.id="menu",e.appendChild(a);const n=document.createElement("a"),o=document.createElement("li");o.classList.add("active"),n.setAttribute("href","#"),o.setAttribute("data-topic","Main Page"),o.innerText="Main Page",a.appendChild(n),n.appendChild(o),o.addEventListener("click",(t=>{this.gridBtn.divWithFailCorrectSigns.innerHTML="",s(t),this.gridBtn.drawAllCategories()}));for(let e=0;e<t.length;e++){const n=document.createElement("a"),o=document.createElement("li");n.setAttribute("href","#"),o.setAttribute("data-topic",t[e].category),o.innerText=t[e].category,a.appendChild(n),n.appendChild(o),o.addEventListener("click",(t=>{this.gridBtn.divWithFailCorrectSigns.innerHTML="",s(t);const e=t.target.getAttribute("data-topic");null!==e&&"Main Page"!==e&&(this.gridBtn.drawCategory(e),i.checked=!1),"Main Page"===e&&this.gridBtn.drawAllCategories()}))}this.element.appendChild(e);const r=document.createElement("a"),d=document.createElement("li");r.setAttribute("href","#statistics"),d.setAttribute("data-topic","Statistics"),d.innerText="Statistics",a.appendChild(r),r.appendChild(d),d.addEventListener("click",(t=>{this.gridBtn.divWithFailCorrectSigns.innerHTML="",s(t)})),this.loginBtn.innerText="Login",this.loginBtn.classList.add("login-btn"),this.loginBtnLi.classList.add("login-btn-div"),this.loginBtnLi.appendChild(this.loginBtn),a.appendChild(this.loginBtnLi),this.loginBtn.addEventListener("click",(()=>{this.registration.drawRegistrPopUp()})),window.addEventListener("click",(t=>{var e;const a=t.target;"menuToggle"===(null===(e=a.parentElement)||void 0===e?void 0:e.id)&&null!==a.parentElement.id||(i.checked=!1)}))}}e.Header=n},917:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoginedAdmin=void 0,e.LoginedAdmin=class{constructor(){this.loginedAdmin=!1}}},359:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Registration=void 0;const a=i(583);i(337);class s extends a.BaseComponent{constructor(t,e,i,a){super("div",["pop-up-registr-wrapper","hidden"]),this.adminPage=e,this.newRout=i,this.overlay=t,this.loginedAdmin=a,this.inputLogin=document.createElement("input"),this.inputPassword=document.createElement("input");const s=document.createElement("p"),n=document.createElement("p");s.innerText="Enter Login: login",n.innerText="Enter Password: password",this.inputLogin.classList.add("input-login"),this.inputPassword.classList.add("input-password");const o=document.createElement("i");o.id="icon",o.classList.add("far","fa-eye"),this.element.appendChild(o),this.inputLogin.setAttribute("type","email"),this.inputPassword.setAttribute("type","password"),this.inputLogin.classList.add("input-login"),this.inputPassword.classList.add("input-password"),this.element.appendChild(s),this.element.appendChild(this.inputLogin),this.element.appendChild(n),this.element.appendChild(this.inputPassword),this.loginBtn=document.createElement("button"),this.loginBtn.innerText="Login",this.loginBtn.disabled=!0,this.loginBtn.classList.add("login-btn-popup","disabled"),this.element.appendChild(this.loginBtn),this.cancelBtn=document.createElement("button"),this.cancelBtn.innerText="Cancel",this.cancelBtn.classList.add("cancel-btn-popup"),this.element.appendChild(this.cancelBtn),this.loginBtn.addEventListener("click",(()=>{this.cancelRegistrPopUp(),this.loginedAdmin.loginedAdmin=!0,this.newRout.navigate("categories")})),this.inputLogin.addEventListener("input",(t=>{const e=t.target;"login"===e.value?(e.classList.add("valid"),this.validatedLoginPassword()):(e.classList.remove("valid"),this.loginBtn.disabled=!0,this.loginBtn.classList.add("disabled"))})),this.inputPassword.addEventListener("input",(t=>{const e=t.target;"password"===e.value?(e.classList.add("valid"),this.validatedLoginPassword()):(e.classList.remove("valid"),this.loginBtn.disabled=!0,this.loginBtn.classList.add("disabled"))}))}drawRegistrPopUp(){this.overlay.overlayON(),this.element.classList.remove("hidden"),this.cancelBtn.addEventListener("click",(()=>{this.cancelRegistrPopUp()})),this.overlay.element.addEventListener("click",(()=>{this.cancelRegistrPopUp()}))}cancelRegistrPopUp(){this.overlay.overlayOFF(),this.element.classList.add("hidden")}validatedLoginPassword(){this.inputLogin.classList.contains("valid")&&this.inputPassword.classList.contains("valid")&&(this.loginBtn.disabled=!1,this.loginBtn.classList.remove("disabled"))}}e.Registration=s},859:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NewRout=void 0;class i{constructor(){this.routes=[],this.root="/",this.current=this.root,this.listenForChanges()}add(t,e){return this.routes.push({path:t,cb:e}),this}static clearSlashes(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")}static getFragment(){let t="";const e=window.location.href.match(/#(.*)$/);return t=e?e[1]:"",i.clearSlashes(t)}navigate(t=""){return window.location.href=`${window.location.href.replace(/#(.*)$/,"")}#${t}`,this}listenForChanges(){setInterval((()=>this.interval()),50)}interval(){this.current!==i.getFragment()&&(this.current=i.getFragment(),this.routes.some((t=>{const e=this.current===t.path;return!!e&&(t.cb.apply({}),e)})))}cleanHref(){this.navigate(""),this.current=""}}e.NewRout=i},861:function(t,e,i){var a=this&&this.__awaiter||function(t,e,i,a){return new(i||(i=Promise))((function(s,n){function o(t){try{d(a.next(t))}catch(t){n(t)}}function r(t){try{d(a.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,r)}d((a=a.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Statistics=e.SortDirection=e.SortBy=void 0,i(410);const n=s(i(677)),o=i(583);var r,d;!function(t){t.Category="category",t.Word="word",t.Translation="translation",t.Clicks="click",t.Correct="correct",t.Wrong="wrong",t.CorrectPerc="correct(%)"}(r=e.SortBy||(e.SortBy={})),function(t){t.DESC="DESC",t.ASC="ASC"}(d=e.SortDirection||(e.SortDirection={}));class c extends o.BaseComponent{constructor(t){super("div",["statistics-wrapper"]),this.dataBaseDarya=t,this.allWords=[],this.divWithBtnToResetStatistic=document.createElement("div"),this.btnToReset=document.createElement("button"),this.btnToPlayHard=document.createElement("button"),this.hardWords=[],this.sortByEnum=r.Category;const e=document.createElement("h2");e.innerText="Statistic",this.element.appendChild(e),this.divWithBtnToResetStatistic.classList.add("div-with-btn-to-reset"),this.btnToReset.classList.add("btn-to-reset"),this.btnToReset.innerText="Reset",this.btnToPlayHard.classList.add("btn-to-reset"),this.btnToPlayHard.innerText="Repeat difficult words",this.element.appendChild(this.divWithBtnToResetStatistic),this.divWithBtnToResetStatistic.appendChild(this.btnToReset),this.divWithBtnToResetStatistic.appendChild(this.btnToPlayHard),this.statisticGridWrapper=document.createElement("div"),this.ulWithWordsInfoTop=document.createElement("ul"),this.statisticGridWrapper.appendChild(this.ulWithWordsInfoTop),this.ulWithWordsInfo=document.createElement("ul"),this.statisticGridWrapper.appendChild(this.ulWithWordsInfo),this.statisticGridWrapper.classList.add("statistic-grid-wrapper"),this.element.appendChild(this.statisticGridWrapper),this.topPart=document.createElement("li"),this.topPart.classList.add("topPart-li"),this.ulWithWordsInfoTop.appendChild(this.topPart);const i=Object.keys(r);for(let t=0;t<i.length;t++){const e=document.createElement("div");e.classList.add("one-category",`${r[i[t]]}-category`);const s=document.createElement("p");s.innerText=`${r[i[t]]}`,this.sortIconCategory=document.createElement("img"),this.sortIconCategory.setAttribute("data-sort",`${d.ASC}`),this.sortIconCategory.setAttribute("src",`${n.default}`),this.sortIconCategory.classList.add("icon-for-sort"),this.sortIconCategory.setAttribute("data-category",`${r[i[t]]}`),this.sortIconCategory.addEventListener("click",(t=>a(this,void 0,void 0,(function*(){const e=t.target,i=e.dataset.sort,a=e.dataset.category;e.classList.toggle("transform");const s=a;this.sortBy(i,s),i===d.ASC?e.dataset.sort=d.DESC:e.dataset.sort=d.ASC})))),e.appendChild(s),e.appendChild(this.sortIconCategory),this.topPart.appendChild(e)}this.btnToReset.addEventListener("click",(()=>{this.resetStatistic()})),this.btnToPlayHard.addEventListener("click",(()=>{}))}sortBy(t,e){this.allWords=this.allWords.sort(((i,a)=>{const s="correct(%)"!==e?i[e]:i.persOfErrors,n="correct(%)"!==e?a[e]:a.persOfErrors;return t===d.DESC?s<n?-1:s>n?1:0:s<n?1:s>n?-1:0})),this.statisticShowSorted()}statisticShow(){return a(this,void 0,void 0,(function*(){this.allWords=yield this.dataBaseDarya.getAllWords(),this.allWords=this.allWords.sort(((t,e)=>e.correct-t.correct)),this.statisticShowSorted()}))}statisticShowSorted(){this.ulWithWordsInfo.innerHTML="";for(let t=0;t<this.allWords.length;t++){const e=document.createElement("li");e.classList.add("word-li"),this.ulWithWordsInfo.appendChild(e);const i=document.createElement("p");i.innerText=`${this.allWords[t].category}`;const a=document.createElement("p");a.innerText=`${this.allWords[t].word}`;const s=document.createElement("p");s.innerText=`${this.allWords[t].translation}`;const n=document.createElement("p");n.innerText=`${this.allWords[t].click}`;const o=document.createElement("p");o.innerText=`${this.allWords[t].correct}`;const r=document.createElement("p");r.innerText=`${this.allWords[t].wrong}`;const d=document.createElement("p");d.innerText=`${this.allWords[t].persOfErrors.toFixed(0)}%`,t%2==0&&e.classList.add("color-line"),e.appendChild(i),e.appendChild(a),e.appendChild(s),e.appendChild(n),e.appendChild(o),e.appendChild(r),e.appendChild(d)}}resetStatistic(){for(let t=0;t<this.allWords.length;t++)this.allWords[t].click=0,this.allWords[t].correct=0,this.allWords[t].persOfErrors=0,this.allWords[t].wrong=0,this.dataBaseDarya.update(this.allWords[t]);this.statisticShow()}}e.Statistics=c},746:(t,e,i)=>{t.exports=i.p+"assets/23d0e138bca01dee202f.mp3"},849:(t,e,i)=>{t.exports=i.p+"assets/88bbaea7d58302d40a65.mp3"},181:(t,e,i)=>{t.exports=i.p+"assets/296640c6f4d1d252c1ac.mp3"},432:(t,e,i)=>{t.exports=i.p+"assets/4c363e33bc693e9b0008.png"},747:(t,e,i)=>{t.exports=i.p+"assets/847af73cbd6bdb859ff1.svg"},615:(t,e,i)=>{t.exports=i.p+"assets/d0d7e71e7a177e66aff8.png"},677:(t,e,i)=>{t.exports=i.p+"assets/27431e1055eed855bd01.png"},937:(t,e,i)=>{t.exports=i.p+"assets/b818e517af13d254e757.svg"},218:(t,e,i)=>{t.exports=i.p+"assets/9fcf9c9d45a22aa4b29f.svg"},639:(t,e,i)=>{t.exports=i.p+"assets/5f4128d4372b6a2b67a4.mp3"},707:(t,e,i)=>{t.exports=i.p+"assets/280b8c315a7475cadc2d.png"}},e={};function i(a){var s=e[a];if(void 0!==s)return s.exports;var n=e[a]={exports:{}};return t[a].call(n.exports,n,n.exports,i),n.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{const t=i(752);i(373),window.onload=()=>{const e=document.getElementById("app");if(!e)throw Error("App root element not found");new t.App(e).start()}})()})();