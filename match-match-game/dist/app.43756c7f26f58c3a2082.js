(()=>{"use strict";var e={76:(e,t,n)=>{n.r(t)},80:(e,t,n)=>{n.r(t)},850:(e,t,n)=>{n.r(t)},528:(e,t,n)=>{n.r(t)},373:(e,t,n)=>{n.r(t)},752:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{d(i.next(e))}catch(e){s(e)}}function a(e){try{d(i.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const o=n(0),s=n(229),r=n(366);t.App=class{constructor(e){this.rootElement=e,this.header=new r.Header,this.rootElement.appendChild(this.header.element),this.game=new s.Game,this.rootElement.appendChild(this.game.element),this.footer=new o.Footer,this.rootElement.appendChild(this.footer.element)}start(){return i(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[0],n=t.images.map((e=>`${t.category}/${e}`));this.game.newGame(n)}))}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},977:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,n(76);const i=n(583);class o extends i.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n      <div class="card">\n        <div class="card__front" style = "background-image: url('./images/${e}')"></div>\n        <div class="card__back"></div>\n      </div>`}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=o},610:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0,n(80);const i=n(583);class o extends i.BaseComponent{constructor(){super("div",["cards-field"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),5e3)}}t.CardsField=o},0:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0,n(850);const i=n(583);class o extends i.BaseComponent{constructor(){super("footer",["footer"]),this.element.innerHTML="RS School 2021 Q1"}}t.Footer=o},229:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,s){function r(e){try{d(i.next(e))}catch(e){s(e)}}function a(e){try{d(i.throw(e))}catch(e){s(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const o=n(680),s=n(583),r=n(977),a=n(610);class d extends s.BaseComponent{constructor(){super(),this.isAnimation=!1,this.cardsField=new a.CardsField,this.element.appendChild(this.cardsField.element),this.element.classList.add("app")}newGame(e){this.cardsField.clear();const t=e.concat(e).map((e=>new r.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.cardsField.addCards(t)}cardHandler(e){return i(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.actiiveCard)return this.actiiveCard=e,void(this.isAnimation=!1);this.actiiveCard.image!==e.image&&(yield o.delay(3e3),yield Promise.all([this.actiiveCard.flipToBack(),e.flipToBack()])),this.actiiveCard=void 0,this.isAnimation=!1}}))}}t.Game=d},366:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Header=void 0,n(528);const i=n(583);class o extends i.BaseComponent{constructor(){super("header",["header"]),this.element.innerHTML='\n  <header id="header">\n    <div class="logo"><div class="logo-pic"></div><p>Match<br>Match<br>Game</p>\n    </div>\n    <div>\n      <ul>\n        <li><button type="button" class="btn">About Game</button></li>\n        <li><button type="button" class="btn">Best Score</button></li>\n        <li><button type="button" class="btn">Game Setting</button></li>\n      </ul>\n    </div>\n    <div>\n      <button type="button" class="regictration-btn btn">Register New Player</button>\n    </div>\n  </header>'}}t.Header=o},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{n(373);const e=n(752);window.onload=()=>{const t=document.getElementById("app");if(!t)throw Error("App root element not found");new e.App(t).start()}})()})();