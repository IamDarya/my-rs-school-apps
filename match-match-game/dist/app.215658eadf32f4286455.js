(()=>{"use strict";var e={76:(e,t,i)=>{i.r(t)},80:(e,t,i)=>{i.r(t)},373:(e,t,i)=>{i.r(t)},752:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const s=i(229);t.App=class{constructor(e){this.rootElement=e,this.game=new s.Game,this.rootElement.appendChild(this.game.element)}start(){return n(this,void 0,void 0,(function*(){const e=yield fetch("./images.json"),t=(yield e.json())[0],i=t.images.map((e=>`${t.category}/${e}`));this.game.newGame(i)}))}}},583:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseComponent=void 0,t.BaseComponent=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},977:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Card=void 0,i(76);const n=i(583);class s extends n.BaseComponent{constructor(e){super("div",["card-container"]),this.image=e,this.isFlipped=!1,this.element.innerHTML=`\n      <div class="card">\n        <div class="card__front" style = "background-image: url('./images/${e}')"></div>\n        <div class="card__back"></div>\n      </div>`}flipToBack(){return this.isFlipped=!0,this.flip(!0)}flipToFront(){return this.isFlipped=!1,this.flip()}flip(e=!1){return new Promise((t=>{this.element.classList.toggle("flipped",e),this.element.addEventListener("transitionend",(()=>t()),{once:!0})}))}}t.Card=s},610:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardsField=void 0,i(80);const n=i(583);class s extends n.BaseComponent{constructor(){super("div",["cards-field"]),this.cards=[]}clear(){this.cards=[],this.element.innerHTML=""}addCards(e){this.cards=e,this.cards.forEach((e=>this.element.appendChild(e.element))),setTimeout((()=>{this.cards.forEach((e=>e.flipToBack()))}),5e3)}}t.CardsField=s},229:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const s=i(680),r=i(583),o=i(977),a=i(610);class d extends r.BaseComponent{constructor(){super(),this.isAnimation=!1,this.cardsField=new a.CardsField,this.element.appendChild(this.cardsField.element)}newGame(e){this.cardsField.clear();const t=e.concat(e).map((e=>new o.Card(e))).sort((()=>Math.random()-.5));t.forEach((e=>{e.element.addEventListener("click",(()=>this.cardHandler(e)))})),this.cardsField.addCards(t)}cardHandler(e){return n(this,void 0,void 0,(function*(){if(!this.isAnimation&&e.isFlipped){if(this.isAnimation=!0,yield e.flipToFront(),!this.actiiveCard)return this.actiiveCard=e,void(this.isAnimation=!1);this.actiiveCard.image!==e.image&&(yield s.delay(3e3),yield Promise.all([this.actiiveCard.flipToBack(),e.flipToBack()])),this.actiiveCard=void 0,this.isAnimation=!1}}))}}t.Game=d},680:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout(t,e)}))}}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{i(373);const e=i(752);window.onload=()=>{const t=document.getElementById("app");if(!t)throw Error("App root element not found");new e.App(t).start()}})()})();